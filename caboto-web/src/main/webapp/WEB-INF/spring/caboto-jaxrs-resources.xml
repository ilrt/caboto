<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
                           http://www.springframework.org/schema/security
                           http://www.springframework.org/schema/security/spring-security-2.0.xsd"
       xmlns:sec="http://www.springframework.org/schema/security">

    <bean id="profileRepository" class="org.caboto.profile.ProfileRepositoryXmlImpl">
        <constructor-arg index="0" value="/profiles.xml"/>
    </bean>

    <bean id="annotationDao" class="org.caboto.dao.AnnotationDaoImpl" scope="prototype">
        <constructor-arg index="0" value="/sdb.ttl"/>
        <constructor-arg index="1" ref="profileRepository"/>
    </bean>

    <bean id="jsonSupport" class="org.caboto.CabotoJsonSupport" />
	
	<sec:http>
		<sec:intercept-url pattern="/**" access="ROLE_USER" />
		<sec:openid-login />
	</sec:http>
 
	<sec:authentication-manager alias="authenticationManager" />
	
	<sec:authentication-provider user-service-ref='myUserDetailsService'/>
	
	<bean id="myUserDetailsService" class="org.caboto.openid.UserDetailsService"/>
	
	<!-- <sec:user-service id="userService">
		<sec:user name="http://www.jkg.in/openid/me" password="notused"
			authorities="ROLE_SUPERVISOR,ROLE_USER" />
	</sec:user-service> -->
</beans>